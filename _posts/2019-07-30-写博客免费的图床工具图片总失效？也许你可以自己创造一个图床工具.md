---
layout:     post
title:      å†™åšå®¢å…è´¹çš„å›¾åºŠå·¥å…·å›¾ç‰‡æ€»å¤±æ•ˆï¼Ÿä¹Ÿè®¸ä½ å¯ä»¥è‡ªå·±åˆ›é€ ä¸€ä¸ªå›¾åºŠå·¥å…·
subtitle:   åˆ›å»ºè‡ªå·±çš„å›¾åºŠå·¥å…·
date:       2019-07-30
author:     LY
header-img: img/post-bg-debug.png
catalog: true
tags:
    - docker
---

> æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„ä»¥ä¸‹ä¸»é¡µï¼Œå°¤å…¶æ˜¯ä»Šæ—¥å¤´æ¡ï¼ï¼ï¼è°¢è°¢ğŸ™ğŸ™ğŸ™
>
> csdnï¼š[é›·å›­çš„csdnåšå®¢](https://blog.csdn.net/leiyuan2580)
>
> ä¸ªäººåšå®¢ï¼š[é›·å›­çš„ä¸ªäººåšå®¢](https://imlcl.store)
>
> ç®€ä¹¦ï¼š[é›·å›­çš„ç®€ä¹¦](https://www.jianshu.com/u/016322e40e1f)
>
> ä»Šæ—¥å¤´æ¡ï¼š[æ¥è‡ªåº•å±‚ç¨‹åºå‘˜çš„ä»°æœ›](https://www.toutiao.com/c/user/6132192948/#mid=1616456407686158)

### é¡¹ç›®èƒŒæ™¯

1. åœ¨è¿™é‡Œå‘¢ï¼Œæˆ‘ç®€å•çš„è¯´ä¸€ä¸‹ä»€ä¹ˆæ˜¯å›¾åºŠã€‚

2. ç»å¸¸å†™åšå®¢çš„åŒå¿—ä»¬è‚¯å®šä¼šç»å¸¸æ€§çš„è´´ä¸€äº›å›¾ç‰‡åˆ°åšå®¢å½“ä¸­ï¼Œä½†æ˜¯å¦‚æœå°†å›¾ç‰‡è·Ÿéšåšæ–‡ä¸€èµ·ä¸Šä¼ ï¼Œé‚£ä¹ˆä¼šé€ æˆåšå®¢ä½“ç§¯è¶Šæ¥è¶Šå¤§ã€‚

3. è¿™ä¸ªæ—¶å€™å‘¢å°±è¯¥æˆ‘ä»¬çš„å›¾åºŠä¸Šåœºäº†ã€‚

4. ä»¥å‰å‘¢æˆ‘ç»å¸¸ç”¨çš„æ˜¯macå®¢æˆ·ç«¯çš„iPicï¼Œä¹Ÿç¡®å®æ˜¯éå¸¸çš„å¥½ç”¨å°¤å…¶æ˜¯å¯ä»¥ä¸Typoraç»“åˆï¼Œå¯ä»¥è‡ªåŠ¨ä¸Šä¼ å¹¶è½¬æ¢å›¾ç‰‡åœ°å€ä¸ºå¤–ç½‘é“¾æ¥ã€‚

5. ä½†æ˜¯å…è´¹çš„å›¾åºŠæ—¶éš”ä¸€æ®µæ—¶é—´åï¼Œå›¾ç‰‡ä¼šè‡ªåŠ¨å¤±æ•ˆï¼Œä¼šå¯¼è‡´ä½ çš„åšå®¢æˆäº†è¿™ä¸ªæ ·å­ï¼š

   ![å¤±æ•ˆå›¾](http://34.92.131.138:6001/group1/M00/00/00/rBEAAl0_vY2AQeAaAADZtvcECjY451.png)

   å±å®æ˜¯éå¸¸çš„éš¾å—ï¼Œå› ä¸ºæœ‰å¥½å¤šä¸œè¥¿æˆ‘éƒ½ä¸è®°å¾—äº†ã€‚ã€‚ã€‚è¿™ä¸ªæ ·å­åƒæ˜¯ä¸¢å¤±äº†è®°å¿†ä¸€æ ·ã€‚

6. å½“ç„¶å•¦ï¼Œä»–ä¹Ÿä¸æ˜¯åªæœ‰å…è´¹çš„ï¼Œè¿˜æœ‰æ”¶è´¹ï¼Œé‚£è‡ªç„¶æ˜¯éå¸¸çš„å¥½ç”¨äº†ï¼Œæ–¹ä¾¿å¿«æ·é€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼Œä¸è¿‡è¦æ”¶è´¹çš„ã€‚å› ä¸ºä¸ªäººæ”¶å…¥ä¸é«˜ï¼Œæ‰€ä»¥æ²¡æœ‰èŠ±é’±å»æ”¯æŒä»–ä»¬ï¼Œåªå¥½è‡ªå·±åŠ¨æ‰‹åšä¸€ä¸ªç®€æ˜“çš„å›¾åºŠå•¦ã€‚



### é¡¹ç›®ç®€ä»‹

1. è™½ç„¶é¡¹ç›®éå¸¸ç®€å•ï¼Œä½†æ˜¯æˆ‘è¿˜æ˜¯ç®€å•çš„ä»‹ç»ä¸€ä¸‹æŠ€æœ¯é€‰å‹ã€‚
   1. ç¼–ç¨‹è¯­è¨€æˆ‘é€‰æ‹©äº†æˆ‘æœ€æ“…é•¿çš„**Java**ã€‚
   2. æœåŠ¡ç«¯æ¡†æ¶æˆ‘é€‰æ‹©äº†æ„å»ºé€Ÿåº¦æœ€å¿«çš„**SpringBoot**ã€‚
   3. å‰ç«¯ä»£ç éå¸¸ç®€å•ï¼Œæˆ‘é€‰æ‹©äº†**HTML**ã€**JavaScript**ä»¥åŠ**jquery**ã€‚
   4. æ–‡ä»¶æœåŠ¡æˆ‘é€‰æ‹©äº†**FastDfs**ä»¥åŠ**Nginx**ã€‚
   5. æœåŠ¡å™¨ç‰ˆæœ¬æˆ‘é€‰æ‹©äº†**Tomcat9**ã€‚
2. â€œ***äº‘ä¸»æœº***â€é€‰å‹ã€‚
   1. è¿™é‡Œä¸ºä»€ä¹ˆæ‰“ä¸ŠåŒå¼•å·å‘¢ï¼Œå› ä¸ºäº‘ä¸»æœºå‘¢ï¼Œç€å®æ˜¯æŒºè´µçš„ï¼Œæ‰€ä»¥å‘¢æˆ‘é€‰æ‹©äº†åœ¨æœ¬åœ°PCä¸Šæ­å»ºï¼Œç„¶åé€šè¿‡ä¸€å°ä½é…ç½®çš„VPSè¿›è¡Œç«¯å£æ˜ å°„ï¼Œå®ç°å¤–ç½‘è®¿é—®ã€‚
   2. ä½†æ˜¯å‘¢æœ¬åœ°çš„PCã€è¿è¡Œè¿™äº›ä¸ªä¸œè¥¿ä¹ŸæŒºæ˜¯è´¹åŠ²çš„ï¼Œæ‰€ä»¥æˆ‘è¿˜é€‰æ‹©äº†ä½¿ç”¨**Docker**å®ç°éƒ¨ç½²ã€‚
   3. å¯è§å‘¢é¡¹ç›®è™½å°å´ä¹Ÿæ˜¯**"äº”è„ä¿±å…¨"**ã€‚
3. ç®€å•è¯´ä¸€ä¸‹ä¸ºä»€ä¹ˆè¦ä½¿ç”¨**Docker**ã€‚
   1. é¦–å…ˆå‘¢ï¼ŒFastDfsæ— è®ºæ˜¯é…ç½®è¿˜æ˜¯å¯åŠ¨è¿è¡Œï¼Œéƒ½æ¯”è¾ƒè´¹åŠ²ï¼Œæˆ‘è®°å¾—åˆæ¬¡æ­å»ºçš„æ—¶å€™è€—è´¹äº†å¾ˆé•¿çš„æ—¶é—´ã€‚
   2. ç»è¿‡ä¸€æ¬¡æ­å»ºæˆ‘å°±å—å¤Ÿäº†å®ƒï¼Œæ‰€ä»¥æˆ‘é€‰æ‹©äº†ä½¿ç”¨**DockerFile**æ„å»ºä¸€ä¸ªå¼€ç®±å³ç”¨çš„**FastDfs**é•œåƒï¼Œè¿™æ ·ä»¥æ¥æ— è®ºåˆ°ä»€ä¹ˆæ ·çš„ç³»ç»Ÿç¯å¢ƒå½“ä¸­ï¼Œåªè¦å¯ä»¥è¿è¡Œ**Docker**æˆ‘å°±å¯ä»¥éå¸¸å¿«é€Ÿçš„æ„å»ºèµ·æ¥ä¸€ä¸ª**fdfs**æ–‡ä»¶æœåŠ¡ç³»ç»Ÿã€‚
   3. å¤šæ¬¡çš„åº”ç”¨ä¹Ÿè¯æ˜äº†æˆ‘çš„æƒ³æ³•æ˜¯æ²¡æœ‰é”™çš„ã€‚



### é¡¹ç›®åŠŸèƒ½æè¿°

1. æ­¤é¡¹ç›®ä¸»è¦æ˜¯å®ç°ç®€å•çš„å›¾ç‰‡æ‹–æ‹½ä¸Šä¼ ï¼Œå¹¶è¿”å›ä¸Šä¼ åçš„å›¾ç‰‡é“¾æ¥ä»¥åŠé¢„è§ˆå›¾å±•ç¤ºï¼Œå¯å®ç°æ‹–æ‹½å¤šå›¾ç‰‡å®ç°åŒæ—¶ä¸Šä¼ ï¼Œç‚¹å‡»å›¾ç‰‡è‡ªåŠ¨å¤åˆ¶å›¾ç‰‡é“¾æ¥ã€‚æ•ˆæœå›¾å¦‚ä¸‹

   ![é¡¹ç›®æ•ˆæœå›¾]( http://34.92.131.138:6001/group1/M00/00/00/rBEAAl0_4p6Aa_efAAG65nivWBo930.png)

2. å¾…å®ç°åŠŸèƒ½ï¼š

   1. åˆ†ç”¨æˆ·å®ç°ä¸Šä¼ ã€‚
   2. åˆ†ç”¨æˆ·å®ç°ä¸Šä¼ è®°å½•ã€‚
   3. åˆ†ç”¨æˆ·å®ç°å·²ä¸Šä¼ æ–‡ä»¶ç®¡ç†ã€‚



### é¡¹ç›®ç»“æ„

1. webé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

   ![webé¡¹ç›®ç»“æ„]( http://34.92.131.138:6001/group1/M00/00/00/rBEAAl0_16yAKj1hAAB-9bqLLhU468.png)

   å’³å’³ï¼ï¼ï¼ä¸è¦ç¬‘ä¸è¦ç¬‘ï½ï½

2. JavaæœåŠ¡ç«¯é¡¹ç›®ç»“æ„å¦‚ä¸‹

   ![æœåŠ¡ç«¯é¡¹ç›®ç»“æ„]( http://34.92.131.138:6001/group1/M00/00/00/rBEAAl0_2G-AZh8fAACj1Tauru8273.png)

   åŒæ ·ä¹Ÿæ˜¯éå¸¸çš„ç®€å•å“ˆï¼

3. ç”±ä¸Šå¯è§æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„æ˜¯éå¸¸çš„ç®€å•çš„ã€‚



### é¡¹ç›®ä»£ç å®ç°

1. è™½ç„¶webé¡¹ç›®åªæœ‰ä¸€ä¸ªé¡µé¢ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯è¦è¯´ä¸€ä¸‹çš„å“ˆã€‚é¡µé¢ä¸­çš„cssæˆ‘å°±ä¸ç»†è¯´äº†ï¼Œæ„Ÿå…´è¶£çš„å¯ä»¥çœ‹ä¸€ä¸‹æˆ‘çš„jsä»£ç ï¼Œä¸ç„¶çš„è¯ç›´æ¥Copyä¹Ÿå¯ä»¥çš„å“¦ã€‚

   ```html
   <html lang="en">
   <style>
       body {
           height: 100%;
           padding: 0;
           margin: 0;
       }
       .outer {
           height: 100%;
           padding: 100px 0 0;
           box-sizing: border-box;
       }
   
       .A {
           height: 100px;
           margin: -100px 0 0;
           background: #BBE8F2;
       }
   
       .B {
           height: 100%;
           background: #D9C666;
       }
   </style>
   <head>
       <meta charset="UTF-8">
       <title>Title</title>
   </head>
   <body class="outer">
   <div id="area" class="A">å°†å›¾ç‰‡æ‹–æ‹½åˆ°æ­¤åŒºåŸŸ</div>
   <div id="preview" class="B"></div>
   <script src="http://code.jquery.com/jquery-latest.js"></script>
   <script>
       $(document).on({
           dragleave: function (e) {      //æ‹–ç¦»
               e.preventDefault();
           },
           drop: function (e) {           //æ‹–åæ”¾
               e.preventDefault();
           },
           dragenter: function (e) {      //æ‹–è¿›
               e.preventDefault();
           },
           dragover: function (e) {       //æ‹–æ¥æ‹–å»
               e.preventDefault();
           }
       });
       var box = document.getElementById('area'); //æ‹–æ‹½åŒºåŸŸ
       box.addEventListener("drop",
           function (e) {
               e.preventDefault(); //å–æ¶ˆé»˜è®¤æµè§ˆå™¨æ‹–æ‹½æ•ˆæœ
               var fileList = e.dataTransfer.files; //è·å–æ–‡ä»¶å¯¹è±¡
               //æ£€æµ‹æ˜¯å¦æ˜¯æ‹–æ‹½æ–‡ä»¶åˆ°é¡µé¢çš„æ“ä½œ
               if (fileList.length == 0) {
                   return false;
               }
               //ä¸Šä¼ 
               xhr = new XMLHttpRequest();
         			// è¿™é‡Œçš„falseå‚æ•°ä»£è¡¨ä½¿ç”¨åŒæ­¥æ–¹å¼æäº¤è¡¨å•
               xhr.open("post", "http://ip:port/uploadFile", false);
               xhr.setRequestHeader("X-Requested-With", "XMLHttpRequest");
         			// åˆ›å»ºä¸€ä¸ªè¡¨å•
               var fd = new FormData();
               //æ£€æµ‹æ–‡ä»¶æ˜¯ä¸æ˜¯å›¾ç‰‡ï¼ŒåŒæ ·æœåŠ¡ç«¯ä¹Ÿå¯ä»¥å¯¹æ–‡ä»¶ç±»å‹åšé™åˆ¶ï¼Œä½†å®é™…ä¸Šfdfså¯¹äºä¸Šä¼ æ–‡ä»¶å¹¶æ— æ ¼å¼è¦æ±‚
               for (var i = 0; i < fileList.length; i++) {
                   if (fileList[i].type.indexOf('image') === -1) {
                       alert("æ‚¨æ‹–çš„ä¸æ˜¯å›¾ç‰‡ï¼");
                       return false;
                   }
                   // å› ä¸ºå®ç°å¤šå›¾ç‰‡ä¸Šä¼ ï¼Œæ‰€ä»¥å¾ªç¯å°†æ‰€æœ‰å›¾ç‰‡éƒ½æ·»åŠ åˆ°fileså…ƒç´ å½“ä¸­
                   fd.append('files', fileList[i]);
               }
         			// æäº¤è¡¨å•
               xhr.send(fd);
         			// ç­‰å¾…è¯·æ±‚ç»“æœ
               if (xhr.status === 200) {
                 	// è‹¥æœåŠ¡ç«¯è¿”å›codeä¸ºSUCåˆ™ä»£è¡¨å¤„ç†æˆåŠŸ
                   if ($.parseJSON(xhr.responseText).code == "SUC") {
                       var str = "";
                     	// å¯¹è¿”å›çš„å›¾ç‰‡é“¾æ¥åˆ—è¡¨urlListè¿›è¡Œå¤„ç†
                       for (var i = 0; i < $.parseJSON(xhr.responseText).urlList.length; i++) {
                         // åŠ¨æ€æ‹¼æ¥htmlå…ƒç´ ï¼Œå…ƒç´ å†…å®¹ä¸ºä¸Šä¼ åçš„é¢„è§ˆå›¾ç‰‡ä»¥åŠå›¾ç‰‡é“¾æ¥ 
                           str = str + "<a href='javascript:void(0);' onclick='CopyUrl(" + i + ")'><img style='width: 150px' src='" + $.parseJSON(xhr.responseText).urlList[i] + "'/></a><e>ç‚¹å‡»å›¾ç‰‡å¤åˆ¶é“¾æ¥ï¼š<input  id='img" + i + "'  style='width: 50%' value=' " + $.parseJSON(xhr.responseText).urlList[i] + "' readonly/></e><br/>";
                       }
                       // å°†æ‹¼æ¥ç»“æœå±•ç¤ºåˆ°é¡µé¢ä¸­
                       $("#preview").html(str);
                   }
               }
           }, false
       );
     	// å®ç°ç‚¹å‡»å›¾ç‰‡è‡ªåŠ¨å¤åˆ¶å›¾ç‰‡é“¾æ¥
       function CopyUrl(id) {
           document.getElementById("img" + id).select();
           document.execCommand("copy");
       }
   </script>
   </body>
   </html>
   ```

2. æ¥ä¸‹æ¥æˆ‘ä»¬å°±è¯´ä¸€ä¸‹æœåŠ¡ç«¯çš„Javaä»£ç å®ç°ï¼š

   1. å…ˆæ¥è¯´ä¸€ä¸‹**Idea**ä¸‹çš„**SpringBoot**é¡¹ç›®åˆ›å»ºå§ï¼Œè¯´çš„ä»”ç»†ä¸€ç‚¹è™½ç„¶å•°å—¦å´ä¹Ÿæ˜¯å¯¹å°ç™½çš„ä¸€ç§ç¦åˆ©ï¼Œå¤§ä½¬ä»¬å°½ç®¡è·³è¿‡è¿™æ®µå¥½äº†ã€‚
   
      ![é¡¹ç›®åˆ›å»º-1]( http://34.92.131.138:6001/group1/M00/00/00/rBEAAl0_5ZOATV-wAAehD04H86M987.png)
   
      ![é¡¹ç›®é—¯è¿›å•Š-2]( http://34.92.131.138:6001/group1/M00/00/00/rBEAAl0_5l2AELKHAAHFaj1lfR8199.png)
   
      ![é¡¹ç›®åˆ›å»º-3]( http://34.92.131.138:6001/group1/M00/00/00/rBEAAl0_5xaAGIOtAAIKLPbf1HE747.png)
   
   2. ä¾ç…§æ­¤æ­¥éª¤åˆ›å»ºé¡¹ç›®å³å¯ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¯´ä¸€ä¸‹ä»£ç ã€‚
   
   3. å…ˆæ¥è¯´ä¸€ä¸‹æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¼•å…¥çš„ä¾èµ–ï¼Œå…ˆæ¥çœ‹**pom.xml**
   
      ```xml
      <!-- druid -->
      <dependency>
        <groupId>com.alibaba</groupId>
        <artifactId>druid</artifactId>
        <version>1.1.10</version>
      </dependency>
      <!-- fdfs -->
      <dependency>
        <groupId>com.github.tobato</groupId>
        <artifactId>fastdfs-client</artifactId>
        <version>1.26.2</version>
      </dependency>
      <!-- lombok -->
      <dependency>
        <groupId>org.projectlombok</groupId>
        <artifactId>lombok</artifactId>
      </dependency>
      ```
   
   4. æå‰è§£æƒ‘ï¼šè™½ç„¶æˆ‘ä»¬å½“å‰çš„ç‰ˆæœ¬ä¸­æš‚æ—¶æ²¡æœ‰ç”¨æ¶‰åŠåˆ°æ•°æ®åº“å­˜å‚¨ï¼Œä½†æˆ‘ä»¬åæœŸä¼šåŠ å…¥ç›¸å…³çš„æ•°æ®ç•™å­˜ä»¥åŠæƒé™ç­‰ç­‰ã€‚è€Œä¸”æˆ‘ä»¬åœ¨é¡¹ç›®åˆ›å»ºä¸­é€‰æ‹©äº†**mysql**æ•°æ®åº“ï¼Œæ ¹æ®**springboot**çš„å¯åŠ¨è¦æ±‚æˆ‘ä»¬å¿…é¡»åœ¨å¯åŠ¨é…ç½®é¡¹å½“ä¸­é…ç½®æ•°æ®åº“ç›¸å…³å‚æ•°ï¼Œå¦åˆ™æ— æ³•æ­£å¸¸å¯åŠ¨é¡¹ç›®ã€‚è€Œä¸ºäº†æ—¥åæ–¹ä¾¿æ‹“å±•å¼€å‘ï¼Œæˆ‘ä»¬é€‰æ‹©ä½¿ç”¨é˜¿é‡Œçš„**Druid**æ•°æ®æºè¿›è¡Œé…ç½®ã€‚å…³äºä¸ºä»€ä¹ˆå¼•å…¥**lombok**ï¼Œå®Œå…¨æ˜¯å› ä¸ºä¸ªäººä¹ æƒ¯ï¼Œè™½ç„¶æˆ‘ä»¬çš„é¡¹ç›®ç»“æ„ä¸­åªæœ‰ä¸€ä¸ªvoç±»ï¼Œä½†éš¾å…ä»¥åä¼šå¢å¤šï¼ŒåŠ å…¥**lombok**çœå»äº†æˆ‘ä»¬å¾ˆå¤šçš„éº»çƒ¦ï¼Œè™½ç„¶å¯ä»¥**IDEA**å¯ä»¥è‡ªåŠ¨ç”Ÿæˆï¼Œä½†æ˜¯ä¹Ÿæ¯”ä¸è¿‡ä»€ä¹ˆéƒ½ä¸ç”¨æ“ä½œæ¥çš„å¥½ï¼ï¼ï¼è€Œ**FDFS**ç›¸å…³åŒ…æ˜¯æˆ‘ä»¬å½“å‰ç‰ˆæœ¬çš„æ ¸å¿ƒï¼Œæˆ‘ä»¬éœ€è¦ä¾èµ–äºè¿™ä¸ªåŒ…è¿›è¡Œæ–‡ä»¶çš„ä¸Šä¼ ç­‰æ“ä½œã€‚
   
   5. æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹é¡¹ç›®é…ç½®ï¼Œ**application.yml**ã€‚å½“ç„¶å¤§å®¶ä¹Ÿå¯ä»¥ä½¿ç”¨**application.properties**,ä¸ªäººæ¯”è¾ƒä¹ æƒ¯ä½¿ç”¨ymlã€‚
   
      ```yaml
      server:
        port: 8081
      spring:
        datasource:
          type: com.alibaba.druid.pool.DruidDataSource
          driver-class-name: com.mysql.jdbc.Driver
          url: jdbc:mysql://192.168.6.23:3306/qingongzhuxue?characterEncoding=utf-8&autoReconnect=true&failOverReadOnly=false
          username: root
          password: root
          thymeleaf:
            prefix: classpath:/templates/
            suffix: .html
            mode: HTML5
      fdfs:
        connect-timeout: 600
        so-timeout: 1500
        thumb-image:
          width: 150
          height: 150
        tracker-list:
          - fdfs:22122
        # è¿™ä¸ªé…ç½®é¡¹æ˜¯æˆ‘è‡ªå®šä¹‰çš„é…ç½®é¡¹ï¼Œåé¢çš„ä»£ç ä¸­ä¼šç”¨åˆ°
        head:
          url: http://ip:6001/
      ```
   
   6. æ¥çœ‹ä¸€ä¸‹æˆ‘ä»¬å”¯ä¸€çš„voç±»ï¼Œ**FileUploadResponse.java**
   
      ```java
      package com.leiyuan.tuchuang.vo;
      
      import lombok.Data;
      
      import java.util.List;
      
      /**
       * ////////////////////////////////////////////////////////////////////
       * //                          _ooOoo_                               //
       * //                         o8888888o                              //
       * //                         88" . "88                              //
       * //                         (| ^_^ |)                              //
       * //                         O\  =  /O                              //
       * //                      ____/`---'\____                           //
       * //                    .'  \\|     |//  `.                         //
       * //                   /  \\|||  :  |||//  \                        //
       * //                  /  _||||| -:- |||||-  \                       //
       * //                  |   | \\\  -  /// |   |                       //
       * //                  | \_|  ''\---/''  |   |                       //
       * //                  \  .-\__  `-`  ___/-. /                       //
       * //                ___`. .'  /--.--\  `. . ___                     //
       * //              ."" '<  `.___\_<|>_/___.'  >'"".                  //
       * //            | | :  `- \`.;`\ _ /`;.`/ - ` : | |                 //
       * //            \  \ `-.   \_ __\ /__ _/   .-` /  /                 //
       * //      ========`-.____`-.___\_____/___.-`____.-'========         //
       * //                           `=---='                              //
       * //      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^        //
       * //            ä½›ç¥–ä¿ä½‘       æ°¸ä¸å®•æœº     æ°¸æ— BUG                    //
       * ////////////////////////////////////////////////////////////////////
       *
       * @author æ¥è‡ªåº•å±‚ç¨‹åºå‘˜çš„ä»°æœ›
       * @ClassName FileUploadResponse
       * @date 2019-07-29 15:49
       * <p></p>
       **/
      @Data
      public class FileUploadResponse {
          // é”™è¯¯ä»£ç 
          private String code;
          // ä¸Šä¼ æˆåŠŸåçš„å›¾ç‰‡é“¾æ¥åˆ—è¡¨
          private List<String> urlList;
      }
      ```
   
      å—¯ï¼ï¼ï¼å°±æ˜¯è¿™ä¸ªæ•ˆæœï¼Œæ‹œå€’åœ¨æˆ‘çš„æ³¨é‡Šä¹‹ä¸‹å§ï¼ï¼ï¼
   
   7. ç„¶åå°±æ˜¯çœ‹çœ‹æˆ‘ä»¬å”¯ä¸€çš„**Controller**ï¼š**TestController.java**ï¼š
   
      ```java
      package com.leiyuan.tuchuang.controller;
      
      import com.leiyuan.tuchuang.vo.FileUploadResponse;
      import com.github.tobato.fastdfs.domain.StorePath;
      import com.github.tobato.fastdfs.service.FastFileStorageClient;
      import org.apache.commons.io.FilenameUtils;
      import org.springframework.beans.factory.annotation.Autowired;
      import org.springframework.beans.factory.annotation.Value;
      import org.springframework.web.bind.annotation.CrossOrigin;
      import org.springframework.web.bind.annotation.PostMapping;
      import org.springframework.web.bind.annotation.RestController;
      import org.springframework.web.multipart.MultipartFile;
      
      import java.io.IOException;
      import java.util.ArrayList;
      import java.util.List;
      
      /**
       * ////////////////////////////////////////////////////////////////////
       * //                          _ooOoo_                               //
       * //                         o8888888o                              //
       * //                         88" . "88                              //
       * //                         (| ^_^ |)                              //
       * //                         O\  =  /O                              //
       * //                      ____/`---'\____                           //
       * //                    .'  \\|     |//  `.                         //
       * //                   /  \\|||  :  |||//  \                        //
       * //                  /  _||||| -:- |||||-  \                       //
       * //                  |   | \\\  -  /// |   |                       //
       * //                  | \_|  ''\---/''  |   |                       //
       * //                  \  .-\__  `-`  ___/-. /                       //
       * //                ___`. .'  /--.--\  `. . ___                     //
       * //              ."" '<  `.___\_<|>_/___.'  >'"".                  //
       * //            | | :  `- \`.;`\ _ /`;.`/ - ` : | |                 //
       * //            \  \ `-.   \_ __\ /__ _/   .-` /  /                 //
       * //      ========`-.____`-.___\_____/___.-`____.-'========         //
       * //                           `=---='                              //
       * //      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^        //
       * //            ä½›ç¥–ä¿ä½‘       æ°¸ä¸å®•æœº     æ°¸æ— BUG                    //
       * ////////////////////////////////////////////////////////////////////
       *
       * @author é›·å›­
       * @ClassName TestController
       * @date 2019-07-29 14:59
       * <p></p>
       **/
      // è®¾ç½®å…¨å±€è¿”å›ä¸ºjson
      @RestController("/")
      // è®¾ç½®å…è®¸è·¨åŸŸè®¿é—®
      @CrossOrigin(origins = "*", maxAge = 3600)
      public class TestController {
        	// è‡ªåŠ¨æ³¨å…¥fdfs
          @Autowired
          private FastFileStorageClient storageClient;
      		// è·å–é…ç½®æ–‡ä»¶ä¸­çš„å€¼ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ‰€è¯´çš„æˆ‘è‡ªå®šä¹‰çš„é…ç½®å˜é‡
          @Value("${fdfs.head.url}")
          private String url;
          /**
           * 
           * @param files æ–‡ä»¶æ•°ç»„
           * @return FileUploadResponse
           * @throws IOException æŠ›å‡ºIOå¼‚å¸¸
           */
          @PostMapping(value = "/uploadFile")
          public FileUploadResponse uploadFile(MultipartFile[] files) throws IOException {
            	// åˆå§‹åŒ–ä¸€ä¸ªåˆ—è¡¨
              List<String> urlList = new ArrayList<>();
            	// å¾ªç¯æ–‡ä»¶æ•°ç»„å°†æ–‡ä»¶ä¸Šä¼ 
              for (MultipartFile file : files) {
                	// æ–‡ä»¶ä¸Šä¼ 
                  StorePath storePath = storageClient.uploadFile(file.getInputStream(), file.getSize(),FilenameUtils.getExtension(file.getOriginalFilename()), null);
                	// æ‹¼æ¥å›¾ç‰‡åœ°å€
                  urlList.add(url + storePath.getGroup() + "/" + storePath.getPath());
              }
            	// ç»„åˆè¿”å›æ•°æ®
              FileUploadResponse fileUploadResponse = new FileUploadResponse();
              fileUploadResponse.setCode("SUC");
              fileUploadResponse.setUrlList(urlList);
              return fileUploadResponse;
          }
      }
      ```
   
   8. æœ€åæˆ‘ä»¬çœ‹ä¸€ä¸‹å¯åŠ¨ç±»ï¼š**TuchuangApplication.java**
   
      ```java
      package com.leiyuan.tuchuang;
      
      import com.github.tobato.fastdfs.FdfsClientConfig;
      import org.springframework.boot.SpringApplication;
      import org.springframework.boot.autoconfigure.SpringBootApplication;
      import org.springframework.context.annotation.EnableMBeanExport;
      import org.springframework.context.annotation.Import;
      import org.springframework.jmx.support.RegistrationPolicy;
      // è¿™é‡ŒåŠ å…¥fdfsé…ç½®ç±»
      @Import(FdfsClientConfig.class)
      // è§£å†³å¯åŠ¨å¼‚å¸¸çš„é—®é¢˜
      @EnableMBeanExport(registration = RegistrationPolicy.IGNORE_EXISTING)
      @SpringBootApplication
      public class TuchuangApplication {
          public static void main(String[] args) {
              SpringApplication.run(TuchuangApplication.class, args);
          }
      }
      ```
   
3. åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ä»£ç ç®—æ˜¯å†™å®Œäº†ï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä½¿ç”¨**Docker**è¿›è¡Œéƒ¨ç½²äº†ã€‚

### ç»“æŸè¯­

1. æ­¤ç¯‡å¹…æœ‰äº›è¿‡é•¿äº†ï¼Œæœ‰å…³éƒ¨ç½²çš„éƒ¨åˆ†ï¼Œå¤§å®¶è¯·æŸ¥çœ‹æˆ‘çš„ä¸‹ä¸€ç¯‡æ–‡ç« ï¼Œ[å¦‚ä½•åˆ©ç”¨Dockerå¿«æ·éƒ¨ç½²ç§äººå›¾åºŠå·¥å…·](https://imlcl.store/2019/07/31/å¦‚ä½•åˆ©ç”¨Dockerå¿«æ·éƒ¨ç½²ç§äººå›¾åºŠå·¥å…·/)ï¼›
2. ä½œä¸ºç¨‹åºå‘˜çš„æˆ‘å½“ç„¶å¯¹äºç®—æ³•åˆ†æä»¥åŠJavaã€Pythonã€GoåŒæ ·æœ‰ç€æµ“åšçš„å…´è¶£ï¼Œç›¸ä¿¡æˆ‘ä»¬å¯ä»¥åœ¨æŠ€æœ¯çš„é“è·¯ä¸Šèµ°çš„æ›´è¿œã€‚
3. å¯¹äºDockerè¿˜è¦å¤šè¯´ä¸¤å¥ï¼Œä½œè€…æœ€è¿‘åœ¨å­¦ä¹ å’Œåº”ç”¨docker-composeç¼–æ’ä»¥åŠdocker swarmé›†ç¾¤éƒ¨ç½²ï¼Œæ‰‹å¤´ä¹Ÿæœ‰å¾ˆå¤šé—²ç½®çš„æœåŠ¡å™¨ç”¨æ¥ç»ƒæ‰‹ï¼Œå¸Œæœ›åŒæ ·æ„Ÿå…´è¶£çš„åŒå­¦ä»¬å¯ä»¥ç§æˆ‘æˆ–è€…è¯„è®ºæˆ‘ä»¬å¤šå¤šäº¤æµå­¦ä¹ å¿ƒå¾—ã€‚
4. è°¢è°¢å¤§å®¶ï¼ï¼ï¼