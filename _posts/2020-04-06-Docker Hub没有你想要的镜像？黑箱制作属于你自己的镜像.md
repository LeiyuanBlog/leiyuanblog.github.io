---
layout:     post
title:      Docker Hubæ²¡æœ‰ä½ æƒ³è¦çš„é•œåƒï¼Ÿé»‘ç®±åˆ¶ä½œå±äºä½ è‡ªå·±çš„é•œåƒ
subtitle:   Docker Hubæ²¡æœ‰ä½ æƒ³è¦çš„é•œåƒï¼Ÿé»‘ç®±åˆ¶ä½œå±äºä½ è‡ªå·±çš„é•œåƒ
date:       2020-04-06
author:     LY
header-img: img/post-docker-bk.png
catalog: true
tags:
    - ä¸“æ 

---

> æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„ä»¥ä¸‹ä¸»é¡µï¼Œå°¤å…¶æ˜¯ä»Šæ—¥å¤´æ¡ï¼ï¼ï¼è°¢è°¢ğŸ™ğŸ™ğŸ™
>
> csdnï¼š[é›·å›­çš„csdnåšå®¢](https://blog.csdn.net/leiyuan2580)
>
> ä¸ªäººåšå®¢ï¼š[é›·å›­çš„ä¸ªäººåšå®¢](https://imlcl.store)
>
> ç®€ä¹¦ï¼š[é›·å›­çš„ç®€ä¹¦](https://www.jianshu.com/u/016322e40e1f)
>
> ä»Šæ—¥å¤´æ¡ï¼š[æ¥è‡ªåº•å±‚ç¨‹åºå‘˜çš„ä»°æœ›](https://www.toutiao.com/c/user/6132192948/#mid=1616456407686158)

## Docker Hubæ²¡æœ‰ä½ æƒ³è¦çš„é•œåƒï¼Ÿé»‘ç®±åˆ¶ä½œå±äºä½ è‡ªå·±çš„é•œåƒ

#### å¼€å¤´è¯´å‡ å¥

1. åœ¨å‰é¢çš„ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬åˆ†åˆ«ä»‹ç»äº†**Dockeré•œåƒ**çš„ä½¿ç”¨ä»¥åŠä¸€äº›åŸºæœ¬æ“ä½œã€‚
2. åœ¨å‰é¢æˆ‘ä»¬è¯´çš„éƒ½æ˜¯ä½¿ç”¨**å®˜æ–¹ã€å¼€æºä½œè€…**æä¾›çš„é•œåƒã€‚
3. è¿™ä¸€ç« èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°±æ¥è¯´è¯´**Docker Images**çš„åˆ¶ä½œâ€”â€”**é»‘ç®±**ã€‚

### æ­£å¼å¼€å§‹

##### ä¸ºä»€ä¹ˆè‡ªå·±åˆ¶ä½œDockeré•œåƒï¼Œå®˜æ–¹ä¸æ˜¯å¾ˆé½å…¨å—ï¼Ÿ

1. ç¡®å®å®˜æ–¹çš„é•œåƒä»“åº“å·²ç»å¾ˆé½å…¨äº†ï¼Œè€Œä¸”è¿˜æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹çš„é•œåƒä»“åº“æ¯”å¦‚ç½‘æ˜“çš„é•œåƒä»“åº“ã€‚
2. ä½†æ˜¯â€”â€”å„æ–¹éœ€æ±‚åƒå¥‡ç™¾æ€ªï¼Œè€Œä¸”æ ¹æ®ç³»ç»Ÿæ¶æ„çš„ä¸åŒï¼Œä»¥æ¥æœåŠ¡çš„æ–¹å¼ä¹Ÿæœ‰æ‰€ä¸åŒã€‚
3. æ‰€ä»¥å¤šæ•°æ—¶å€™ï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¼šä½¿ç”¨è‡ªå·±åˆ¶ä½œçš„é•œåƒã€‚

##### ä¸ºä»€ä¹ˆä½¿ç”¨â€œé»‘ç®±â€æ–¹å¼åˆ¶ä½œï¼Œæœ‰ä»€ä¹ˆå¥½å¤„å—ï¼Ÿ

1. å…¶å®è¿™æ˜¯ä¸€ç§å¾ˆä¸è§„çŸ©çš„åˆ¶ä½œæ–¹æ³•ï¼Œå¦‚æœç¡¬è¦è¯´æœ‰ä»€ä¹ˆå¥½å¤„çš„è¯ï¼Œé‚£å°±æ˜¯é—¨æ§›ä½ã€æ“ä½œç®€å•ã€‚
2. åŒæ—¶æ— å¯é¿å…çš„ä¼šæœ‰äº›ä¸å¥½çš„åœ°æ–¹â€”â€”â€œä½“ç§¯â€å¤§ã€‚
3. åŒæ ·çš„é•œåƒï¼Œ**é»‘ç®±**åˆ¶ä½œçš„å¤§å°å¯èƒ½æ˜¯**dockerfile**åˆ¶ä½œçš„å¤§å°**ä¸¤å€**ã€‚
4. ä¸‹ä¸ªç« èŠ‚æˆ‘ä»¬ä¼šä»‹ç»**dockerfile**çš„åˆ¶ä½œæ–¹å¼ï¼Œç›¸å¯¹éœ€è¦å­¦ä¹ å’ŒæŒæ¡çš„ä¸œè¥¿ä¼šç¨å¤šä¸€äº›ã€‚

##### å¼€å§‹å‰çš„å‡†å¤‡å·¥ä½œâ€”â€”æ‰¾åˆ°è‡ªå·±ç†Ÿæ‚‰çš„æ“ä½œç³»ç»Ÿé•œåƒ

1. æ‰“å¼€Docker Hubã€‚
2. å·¦ä¾§**Categories**å¤é€‰æ¡†ä¸­ï¼Œé€‰ä¸­**Operating Systems**ä»¥ç­›é€‰æ“ä½œç³»ç»Ÿé•œåƒã€‚
3. æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å³è¾¹åˆ—å‡ºäº†è®¸å¤š**å‘è¡Œç‰ˆlinux**çš„ç³»ç»Ÿé•œåƒï¼Œæœ‰æˆ‘ä»¬å¸¸ç”¨çš„**Ubuntuã€Centosã€Debian**ç­‰ç­‰ã€‚
4. è¿™é‡Œæˆ‘é€‰æ‹©æˆ‘å¸¸ç”¨çš„**Centos**é•œåƒä½œä¸ºæˆ‘ä»¬å³å°†åˆ¶ä½œé•œåƒçš„åŸºç¡€é•œåƒã€‚
5. åœ¨**Tags**ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°é•œåƒåˆæ ¹æ®ç‰ˆæœ¬åˆ†ä¸ºå¤šä¸ª**æ ‡ç­¾ï¼ˆTagsï¼‰**ï¼Œæˆ‘ç›´æ¥é€‰æ‹©latestç‰ˆæœ¬ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ä¸åŒæ ‡ç­¾ã€‚
6. é€‰æ‹©å¥½ä¹‹åï¼Œç›´æ¥å¤åˆ¶æ‹‰å–å‘½ä»¤åœ¨æœ¬åœ°æ‹‰å–é•œåƒå³å¯ã€‚
7. å¦‚æœæœ‰çš„å°ä¼™ä¼´å› ä¸ºç½‘ç»œé—®é¢˜æ— æ³•æ­£å¸¸æ‹‰å–ï¼Œå»ºè®®å¤§å®¶ä½¿ç”¨ç½‘æ˜“çš„é•œåƒä»“åº“è¿›è¡Œæ‹‰å–ï¼Œé€Ÿåº¦ä¼šå¿«å¾ˆå¤šã€‚

##### å¯¹æ“ä½œç³»ç»Ÿé•œåƒåšä¸€äº›ç®€å•çš„æ“ä½œ

1. åœ¨æ“ä½œ**linux**ç³»ç»Ÿçš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½ä¼šæœ‰ä¸ªä¹ æƒ¯ï¼Œé‚£å°±æ˜¯`yum -y update`ã€‚

2. ä¸ºä»€ä¹ˆè¿™ä¹ˆåšå‘¢ï¼Ÿè¿™æ ·æ˜¯ä¸ºäº†é¿å…å®‰è£…çš„è½¯ä»¶ç”±äºä¾èµ–æœåŠ¡ç‰ˆæœ¬ä¸å…¼å®¹å¯¼è‡´å¼‚å¸¸ã€‚

3. æ‰€ä»¥å¯¹äºæˆ‘ä»¬çš„ç³»ç»Ÿé•œåƒï¼Œä¹Ÿéœ€è¦æ‰§è¡Œï¼Œæˆ‘å»ºè®®å°†æ‰§è¡Œè¿‡æ›´æ–°æ“ä½œçš„é•œåƒä¿å­˜èµ·æ¥ï¼Œä½œä¸ºæˆ‘ä»¬åç»­é•œåƒåˆ¶ä½œçš„åŸºç¡€é•œåƒï¼Œèƒ½å’ŒèŠ‚çœå¾ˆå¤šæ—¶é—´ã€‚

4. å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

   ```shell
   # å®¿ä¸»æœºæ“ä½œ
   $ docker pull centos
   $ docker -d --name centos centos
   $ docker exec -it centos bash
   # å®¹å™¨ä¼ªç»ˆç«¯æ“ä½œï¼Œè¿™æ­¥å¯èƒ½éœ€è¦ä¸€ç‚¹æ—¶é—´å“¦ï¼Œè€å¿ƒç­‰å¾…
   $ yum -y update
   $ exit
   # å®¿ä¸»æœºæ“ä½œ
   ## $ docker commit -m "å¤‡æ³¨ä¿¡æ¯" -a "æ›´æ–°è€…" ${å®¹å™¨ID} ${é•œåƒåç§°:é•œåƒæ ‡ç­¾}
   $ docker commit -m "centos update" -a "LY" ${å®¹å™¨ID} centos_update:latest
   ## æŸ¥çœ‹é•œåƒ
   $ docker images
   ```

##### Dockeré»‘ç®±åˆ¶ä½œTomcaté•œåƒå¹¶é€šè¿‡ç¯å¢ƒå˜é‡é…ç½®è¿è¡Œç«¯å£

1. ç¬¬ä¸€æ­¥æˆ‘ä»¬è¿è¡Œåˆšæ‰åˆ¶ä½œçš„**centos_update:latest**é•œåƒã€‚

2. ç¬¬äºŒæ­¥è¿›å…¥å®¹å™¨ä¼ªç»ˆç«¯å¹¶ä¸”é…ç½®**Java**ç¯å¢ƒï¼Œå¹¶ä¸”å®‰è£…**tomcat**ã€‚

3. ç¬¬ä¸‰æ­¥ç¼–å†™è„šæœ¬è¿›è¡Œå­—ç¬¦æ›¿æ¢ã€å¯åŠ¨tomcatã€‚

4. ç¬¬å››æ­¥ä¿å­˜å®¹å™¨ä¸ºé•œåƒï¼Œä»¥å¤‡åç”¨ã€‚

5. å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

   ```shell
   # ç¬¬ä¸€æ­¥
   $ docker run -d -v ./jdk-8u151-linux-x64.tar.gz:/usr/local/java/jdk-8u151-linux-x64.tar.gz -v ./apache-tomcat-9.0.26.tar.gz:/app/software/apache-tomcat-9.0.26.tar.gz --name centos_update centos_update:latest
   # ç¬¬äºŒæ­¥
   ## å®¿ä¸»æœºç»ˆç«¯
   $ docker exec -it centos_update bash
   ## å®¹å™¨ä¼ªç»ˆç«¯
   $ tar -zxvf /usr/local/java/jdk-8u151-linux-x64.tar.gz -C /usr/local/java/
   $ echo 'export JAVA_HOME=/usr/local/java/jdk1.8.0_151' >> /etc/profile
   $ echo 'export PATH=.:$JAVA_HOME/bin:$PATH'  >> /etc/profile
   $ echo 'export TOMCAT_PORT=8080'  >> /etc/profile
   $ echo 'export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar'  >> /etc/profile
   $ source /etc/profile
   $ tar -zxvf /app/software/apache-tomcat-9.0.26.tar.gz -C /app/software/
   $ mv /app/software/apache-tomcat-9.0.26 /app/software/tomcat
   $ ln -s /app/software/tomcat /root/tomcat
   # ç¬¬ä¸‰æ­¥
   $ mkdir -p /app/software/bash
   $ touch /app/software/bash/start.sh
   $ vim /app/software/bash/start.sh
   ## start.shè„šæœ¬å†…å®¹ Start{
         #!/bin/bash
         ## authorï¼šæ¥è‡ªåº•å±‚ç¨‹åºå‘˜çš„ä»°æœ›
         sed -i 's/8080/'${TOMCAT_PORT}'/g' /app/software/tomcat/conf/server.xml
         /app/software/tomcat/bin/startup.sh
         tail -f /app/software/tomcat/logs/catalina.out
   ## }start.shè„šæœ¬å†…å®¹ End
   $ exit
   # ç¬¬å››æ­¥
   $ docker commit -m "my tomcat image" -a "LY" ${å®¹å™¨ID} my_tomcat:latest
   ```

##### åˆ¶ä½œçš„é•œåƒè¯¥å¦‚ä½•ä½¿ç”¨ï¼Ÿå¦‚ä½•æŒ‡å®štomcatè¿è¡Œç«¯å£ï¼Ÿå¦‚ä½•éƒ¨ç½²é¡¹ç›®ï¼Ÿ

1. ä¸æ­£å¸¸çš„é•œåƒæ— å¼‚ï¼Œåªéœ€åœ¨å¯åŠ¨é•œåƒæ—¶æŒ‡å®šè¿è¡Œæˆ‘ä»¬åœ¨é•œåƒå†…çš„**start.sh**è„šæœ¬å³å¯ã€‚

2. è‹¥éœ€æŒ‡å®štomcatè¿è¡Œç«¯å£ï¼Œåªéœ€æ·»åŠ ç¯å¢ƒå˜é‡é…ç½®å³å¯ã€‚

3. è‡³äºéƒ¨ç½²é¡¹ç›®ï¼Œæˆ‘ä»¬åªéœ€è¦å°†æˆ‘ä»¬çš„æœåŠ¡åŒ…ï¼ˆ**war**ï¼‰åœ¨å®¹å™¨å¯åŠ¨æ—¶æŒ‚è½½è‡³å®¹å™¨ä¸­å³å¯ï¼Œæˆ–è€…å¯åŠ¨åcopyè¿›å»ä¹Ÿå¯ä»¥ã€‚

4. å…·ä½“æ“ä½œå¦‚ä¸‹ï¼š

   ```shell
   $ docker run -d -p 8080:9999 -v ./war/:/app/software/tomcat/webapps/ -e "TOMCAT_PORT=9999" --name tomcat my_tomcat:latest
   ```

### æœ€åè¯´å‡ å¥

1. ä»Šå¤©æˆ‘ä»¬ç®€å•çš„è¯´äº†ä¸€ä¸‹**é»‘ç®±**ç¯å¢ƒä¸‹çš„é•œåƒåˆ¶ä½œã€‚
2. è™½ä¸æ˜¯å¾ˆè§„çŸ©çš„åšæ³•ï¼Œä½†æ˜¯æœ‰äº›å¤æ‚çš„è½¯ä»¶é•œåƒæˆ‘è§‰å¾—åªèƒ½è¿™æ ·æ¥åˆ¶ä½œã€‚
3. ä¸‹ä¸€ç« èŠ‚ä¸­æˆ‘ä»¬ä¼šè®²è§£ä½¿ç”¨**dockerfile**çš„é•œåƒåˆ¶ä½œæ–¹æ³•ã€‚
4. é»‘ç®±çš„ç¼ºç‚¹ç‰¹åˆ«çš„æ˜æ˜¾ï¼Œè‡³äºæœ‰å¤šæ˜æ˜¾ï¼Œå¤§å®¶é€šè¿‡ä¸‹ç« èŠ‚çš„å­¦ä¹ åå¯ä»¥ä½¿ç”¨ä¸¤è€…åˆ¶ä½œçš„é•œåƒåšå¯¹æ¯”çœ‹çœ‹ã€‚
5. å¸Œæœ›ä»Šå¤©çš„æ–‡ç« å¯ä»¥ç»™å¤§å®¶å¸¦æ¥ä¸€å®šçš„æ”¶è·ï¼ŒåŒæ—¶æ„Ÿè°¢å¤§å®¶æ”¯æŒå’Œå…³æ³¨æˆ‘ã€‚
6. å¹´è½»äººä»¬ï¼Œä¸€èµ·åŠªåŠ›å§ï¼ï¼ï¼