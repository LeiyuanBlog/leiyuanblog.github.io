---
layout:     post
title:      é˜¿é‡Œäº‘JavaçŸ­ä¿¡æœåŠ¡SDK
subtitle:   çŸ­ä¿¡æœåŠ¡
date:       2018-10-08
author:     LY
header-img: img/post-bg-debug.png
catalog: true
tags:
    - çŸ­ä¿¡æœåŠ¡
    - sdk
    - API
---

> æ¬¢è¿å¤§å®¶å…³æ³¨æˆ‘çš„ä»¥ä¸‹ä¸»é¡µï¼Œå°¤å…¶æ˜¯ä»Šæ—¥å¤´æ¡ï¼ï¼ï¼è°¢è°¢ğŸ™ğŸ™ğŸ™
>
> csdnï¼š[é›·å›­çš„csdnåšå®¢](https://blog.csdn.net/leiyuan2580)
>
> ä¸ªäººåšå®¢ï¼š[é›·å›­çš„ä¸ªäººåšå®¢](https://imlcl.store)
>
> ç®€ä¹¦ï¼š[é›·å›­çš„ç®€ä¹¦](https://www.jianshu.com/u/016322e40e1f)
>
> ä»Šæ—¥å¤´æ¡ï¼š[æ¥è‡ªåº•å±‚ç¨‹åºå‘˜çš„ä»°æœ›](https://www.toutiao.com/c/user/6132192948/#mid=1616456407686158)

#é˜¿é‡Œäº‘JavaçŸ­ä¿¡æœåŠ¡SDK 

	 1. é¦–å…ˆåœ¨mavenä¸­æ·»åŠ ä¾èµ–
```
        <dependency>
            <groupId>com.aliyun</groupId>
            <artifactId>aliyun-java-sdk-core</artifactId>
            <version>3.7.1</version>
        </dependency>
        <dependency>
            <groupId>com.aliyun</groupId>
            <artifactId>aliyun-java-sdk-dysmsapi</artifactId>
            <version>1.1.0</version>
        </dependency>
```

	 2. åœ¨é˜¿é‡Œäº‘æ§åˆ¶å°ç”³è¯·ç­¾å
			æ‰“å¼€é˜¿é‡Œäº‘æ§åˆ¶å°--ã€‹çŸ­ä¿¡æœåŠ¡--ã€‹ç­¾åç®¡ç†--ã€‹æ·»åŠ ç­¾å
		éœ€è¦åœ¨è¿™é‡Œç”³è¯·ä¸€ä¸ªç­¾åæ•ˆæœå¦‚ä¸‹å›¾!
![ç­¾åç¤ºä¾‹]((https://img-blog.csdn.net/2018082421074915?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xlaXl1YW4yNTgw/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)
â€‹		æ²¡æœ‰è¿™ä¸ªæ˜¯ä¸è¡Œçš„ï¼Œæ‰€ä»¥å¿…é¡»å…ˆç”³è¯·ç­¾åã€‚å¦‚æœæ˜¯ä¸ªäººè´¦æˆ·çš„è¯åªèƒ½ç”³è¯·ä¸€ä¸ªç­¾åï¼Œå¦‚æœæƒ³è¦æ›´æ¢ç­¾åçš„è¯å¿…é¡»æŠŠä¹‹å‰
â€‹		çš„åˆ é™¤æ‰æ‰å¯ä»¥ã€‚è€Œä¸”ç”³è¯·æ—¶é—´æ¯”è¾ƒä¹…ï¼Œéœ€è¦æ…é‡ã€‚
â€‹		

	 3. ç”³è¯·æ¨¡æ¿
			 æ¨¡æ¿å¯ä»¥æ‹¥æœ‰å¤šä¸ªï¼Œæ‰€ä»¥å¯ä»¥å°½é‡æ ¹æ®çŸ­ä¿¡çš„å†…å®¹å»ç¼–å†™ï¼Œæ¨¡æ¿å®ä¾‹å¦‚ä¸‹
			 äº²çˆ±çš„è¯»è€…${name}ï¼Œæ‚¨å€Ÿé˜…çš„${bookName}å·²ç»é€¾æœŸ${data}å¤©ï¼Œè¯·åŠæ—¶å½’è¿˜ï¼
			 å…¶ä¸­${name}ï¼Œ${bookName}ï¼Œ${data}ä¸ºè‡ªå®šä¹‰å˜é‡ï¼Œéœ€è¦åœ¨javaä»£ç ä¸­è¿›è¡Œå¡«å†™ï¼
			 æ­¤ä¸ºçŸ­ä¿¡æé†’æœåŠ¡ï¼Œå¦‚æœä½ æ˜¯è¦åšéªŒè¯ç 
			 å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ¨¡æ¿ï¼šæ‚¨çš„æ ¡éªŒç ï¼š${code}ï¼Œæ‚¨æ­£åœ¨æ³¨å†Œæˆä¸ºä¼šå‘˜ï¼Œæ„Ÿè°¢æ‚¨çš„æ”¯æŒï¼
			 å…¶ä¸­${code}ä¸ºéªŒè¯ç ã€‚å…­ä½éªŒè¯ç ç”Ÿæˆæ–¹å¼å¦‚ä¸‹


```
// å¦‚æœéªŒè¯ç ä¸ºå››ä½å°†1000000æ¢æˆ10000å³å¯ï¼ŒéªŒè¯ç ä¹Ÿå¯ä»¥æ˜¯Stringç±»å‹ï¼Œå®Œå…¨å¯ä»¥è‡ªç”±å†³å®š
int code = (int) (Math.random() * 1000000);
```
	 4.ç¼–å†™Javaä»£ç 

```

import com.aliyuncs.DefaultAcsClient;
import com.aliyuncs.IAcsClient;
import com.aliyuncs.dysmsapi.model.v20170525.SendSmsRequest;
import com.aliyuncs.dysmsapi.model.v20170525.SendSmsResponse;
import com.aliyuncs.exceptions.ClientException;
import com.aliyuncs.profile.DefaultProfile;
import com.aliyuncs.profile.IClientProfile;

public class Send {

    //äº§å“åç§°:äº‘é€šä¿¡çŸ­ä¿¡APIäº§å“,å¼€å‘è€…æ— éœ€æ›¿æ¢
    static final String product = "Dysmsapi";
    //äº§å“åŸŸå,å¼€å‘è€…æ— éœ€æ›¿æ¢
    static final String domain = "dysmsapi.aliyuncs.com";

    // TODO æ­¤å¤„éœ€è¦æ›¿æ¢æˆå¼€å‘è€…è‡ªå·±çš„AK(åœ¨é˜¿é‡Œäº‘è®¿é—®æ§åˆ¶å°å¯»æ‰¾)
    // accessKeyIdï¼ŒaccessKeySecretå¯»æ‰¾æ­¥éª¤å‚è€ƒå®˜æ–¹æ–‡æ¡£
    //https://help.aliyun.com/document_detail/55284.html?spm=5176.10629532.106.1.24981cbeej0YCz
    static final String accessKeyId = "å¡«å†™ä½ è‡ªå·±çš„accessKeyId";
    static final String accessKeySecret = "å¡«å†™ä½ è‡ªå·±çš„accessKeySecret";
    
    // æ–¹æ³•åå¯ä»¥è‡ªè¡Œå®šä¹‰
    // å‚æ•°å¯ä»¥è‡ªå·±å®šä¹‰éšæ„æ›´æ”¹ï¼Œæ›´æ”¹ä¸ºä½ è‡ªå·±éœ€è¦çš„å‚æ•°å³å¯
    // è¿”å›å€¼ç±»å‹å¯ä»¥è‡ªè¡Œå®šä¹‰
    public static String sendSms(String phone, String bookName, String userName) throws ClientException {

        //å¯è‡ªåŠ©è°ƒæ•´è¶…æ—¶æ—¶é—´
        System.setProperty("sun.net.client.defaultConnectTimeout", "10000");
        System.setProperty("sun.net.client.defaultReadTimeout", "10000");

        //åˆå§‹åŒ–acsClient,æš‚ä¸æ”¯æŒregionåŒ–
        IClientProfile profile = DefaultProfile.getProfile("cn-hangzhou", accessKeyId, accessKeySecret);
        DefaultProfile.addEndpoint("cn-hangzhou", "cn-hangzhou", product, domain);
        IAcsClient acsClient = new DefaultAcsClient(profile);

        //ç»„è£…è¯·æ±‚å¯¹è±¡-å…·ä½“æè¿°è§æ§åˆ¶å°-æ–‡æ¡£éƒ¨åˆ†å†…å®¹
        SendSmsRequest request = new SendSmsRequest();
        //å¿…å¡«:å¾…å‘é€æ‰‹æœºå·
        request.setPhoneNumbers(phone);
        //å¿…å¡«:çŸ­ä¿¡ç­¾å-å¯åœ¨çŸ­ä¿¡æ§åˆ¶å°ä¸­æ‰¾åˆ°
        request.setSignName("ä½ è‡ªå·±çš„ç­¾ååç§°");
        //å¿…å¡«:çŸ­ä¿¡æ¨¡æ¿-å¯åœ¨çŸ­ä¿¡æ§åˆ¶å°ä¸­æ‰¾åˆ°
        request.setTemplateCode("ä½ è‡ªå·±çŸ­ä¿¡æ¨¡æ¿çš„æ¨¡ç‰ˆCODE");
        //å¯é€‰:æ¨¡æ¿ä¸­çš„å˜é‡æ›¿æ¢JSONä¸²,å¦‚æ¨¡æ¿å†…å®¹ä¸º"äº²çˆ±çš„${name},æ‚¨çš„éªŒè¯ç ä¸º${code}"æ—¶,æ­¤å¤„çš„å€¼ä¸º
        request.setTemplateParam("{\"name\":\":" + userName + "\"," + "\"bookName\":\"ã€Š" + bookName + "ã€‹\"}");
        //é€‰å¡«-ä¸Šè¡ŒçŸ­ä¿¡æ‰©å±•ç (æ— ç‰¹æ®Šéœ€æ±‚ç”¨æˆ·è¯·å¿½ç•¥æ­¤å­—æ®µ)
        //request.setSmsUpExtendCode("90997");

        //å¯é€‰:outIdä¸ºæä¾›ç»™ä¸šåŠ¡æ–¹æ‰©å±•å­—æ®µ,æœ€ç»ˆåœ¨çŸ­ä¿¡å›æ‰§æ¶ˆæ¯ä¸­å°†æ­¤å€¼å¸¦å›ç»™è°ƒç”¨è€…
        request.setOutId("yourOutId");

        //hint æ­¤å¤„å¯èƒ½ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ³¨æ„catch
        SendSmsResponse sendSmsResponse = acsClient.getAcsResponse(request);

        return "success";
    }
```

 